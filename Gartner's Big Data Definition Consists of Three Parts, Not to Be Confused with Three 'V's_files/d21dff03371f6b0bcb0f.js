webpackJsonp([5],{397:function(e,t,i){"use strict";function r(){var e=document.createElement("fbs-ad");e.setAttribute("position","mobile"),document.body.appendChild(e)}function n(){var e=document.getElementById("ng-templates-state");return JSON.parse(h.a.unescapeTransferState(e.textContent))}function o(e){var t=window.external_services=window.external_services||{},i=t.ad_slots=t.ad_slots||{};e.render.map(function(e){return{creative_id:e.creativeId,line_item_id:e.lineItemId,size_width:e.size&&e.size[0],size_height:e.size&&e.size[1],slot_id:e.slot&&e.slot.getSlotElementId()}}).subscribe(function(e){i[e.slot_id]=e})}Object.defineProperty(t,"__esModule",{value:!0});var s=(i(398),i(399),i(35),i(138)),c=i(2),a=(i(74),i(64),i(71),i(144),function(){function e(){}return e.getOffset=function(e){if(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}},e}()),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(e){function t(){var t=e.call(this)||this;return t.leaderboardAd=document.querySelector(".top-ad-container"),t.navbar=document.querySelector("navbar"),t}return l(t,e),Object.defineProperty(t,"observedAttributes",{get:function(){return["railIndex"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"railIndex",{get:function(){return this._railIndex},set:function(e){this._railIndex=e,this.setAttribute("railIndex",e+"")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return"false"!==(this.getAttribute("is-active")||"false")},set:function(e){this.setAttribute("is-active",e+"")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progressive",{get:function(){return"false"!==(this.getAttribute("progressive")||"false")},set:function(e){this.setAttribute("progressive",e+"")},enumerable:!0,configurable:!0}),t.prototype.connectedCallback=function(){this.init()},t.prototype.attributeChangedCallback=function(e,t,i,r){"railIndex"===e&&i!==t&&(this.railIndex=+i)},t.prototype.refresh=function(){var e=this;this.ad_load_complete=!1,c.Observable.from(this.querySelectorAll('[position="recx"]')).subscribe(function(t){t===e.requiredRecx?e.requiredRecx.refresh():e.removeChild(t)}),this.rec&&this.rec.refresh(),this.sponLogoAd&&this.sponLogoAd.refresh(),this.scrollSubs.unsubscribe(),this.registerSticky()},t.prototype.startAdRail=function(){this.addAd("rec"),this.addAd("spon-logo"),this.registerSticky()},t.prototype.registerSticky=function(){var e=this;this.scrollSubs=c.Observable.fromEvent(window,"scroll").filter(function(){return e.isActive}).subscribe(function(t){return e.stickyHandler()})},t.prototype.subscribeForNextAd=function(){var e=this;this.nextAdSubs=c.Observable.fromEvent(window,"scroll").throttleTime(100).filter(function(){return!e.ad_load_complete||(e.nextAdSubs.unsubscribe(),!1)}).first(function(){return e.getBoundingClientRect().bottom-window.innerHeight<.25*window.innerHeight}).subscribe(function(){e.addAd("recx")})},t.prototype.init=function(){var e=this;this.margin_between_ads=600,this.ad_load_complete=!1,this.maxRecXSpace=600+this.margin_between_ads,this.railIndex=+this.getAttribute("railIndex"),setTimeout(function(){e.startAdRail()})},t.prototype.listenToRender=function(e){var t=this;e.addEventListener("render",function(i){var r=i.detail,n=r.size;if("rec"===e.position&&n&&0!==n[0]&&0!==n[1])t.rec_height=e.clientHeight,e.style.width=e.clientWidth+"px",e.style.height=t.rec_height+"px";else if("spon-logo"!==e.position){e.addEventListener("viewable",function(){t.adjustForFluidAd(e)}),"rec"===e.position&&(t.rec_height=600),e.style.width=e.clientWidth+"px",e.style.height="600px";var o=e.firstChild;o.style.width=e.clientWidth+"px"}"spon-logo"!==e.position&&(t.progressive?t.subscribeForNextAd():t.addAd("recx")),"rec"!==e.position&&e.removeEventListener("render")})},t.prototype.stickyHandler=function(){var e,t=this.rec?this.rec.firstElementChild:null,i=this.querySelector('[position="recx"]'),r=this.leaderboardAd.classList.contains("sticky")?this.leaderboardAd:null,n=r?r.clientHeight:0,o=pageYOffset,s=this.navbar.classList.contains("navbar-expanded")?60:0,c=s+(n||30),l=a.getOffset(this).top+this.sponLogoAd.clientHeight+(this.sponLogoAd.empty?0:20),u=l-(n||30)-s;t&&(this.rec_height=t.clientHeight),i&&(e=a.getOffset(i).top-this.rec_height-60-s),t&&(u-o>0?(t.style.position="relative",t.style.top="0px"):u-o<=0&&o<e?(t.style.position="fixed",t.style.top=c+"px"):o>e&&(t.style.position="absolute",t.style.top=i.offsetTop-30-this.rec_height+"px"))},t.prototype.addAd=function(e){if(this.requiredRecx&&"recx"===e&&this.getAvailableSpace()<this.maxRecXSpace)return void(this.ad_load_complete=!0);var t=document.createElement("fbs-ad");t.position=e,this.railIndex>=0&&(t.adId="ad-rail-"+this.railIndex+"-"+e),this.listenToRender(t),"recx"!==e||this.requiredRecx?"spon-logo"===e?(this.sponLogoAd=t,this.insertBefore(t,this.rec)):("rec"===e&&(this.rec=t),this.appendChild(t)):(this.requiredRecx=t,this.appendChild(t))},t.prototype.adjustForFluidAd=function(e){var t=e.firstChild;"rec"===e.position&&(this.rec_height=e.clientHeight),e.style.height=this.rec_height+"px",e.style.width=t.style.width=e.clientWidth+"px"},t.prototype.getAvailableSpace=function(){return this.parentElement.parentElement.getBoundingClientRect().bottom-this.getBoundingClientRect().bottom},t}(HTMLElement),h=i(95);document.addEventListener("FbsAdsBootstrapped",function(){return customElements.define("fbs-ad-rail",u)}),function(){try{var e=n(),t=window.fbsads=new s.a;t.bootstrap(e.adsConfig),e.is_mobile&&r(),o(t)}catch(e){throw new Error("There was a problem with initalizing ads early")}}();var d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=function(e){function t(){var t=e.call(this)||this;return t.imgTag=document.createElement("img"),t.imgTag.addEventListener("load",t.removePlaceholder.bind(t)),t}return d(t,e),Object.defineProperty(t,"observedAttributes",{get:function(){return["src","low-res-src","enhanced"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this.getAttribute("src")},set:function(e){this.setAttribute("src",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alt",{get:function(){return this.getAttribute("alt")},set:function(e){this.setAttribute("alt",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enhanced",{get:function(){return this.hasAttribute("enhanced")&&"false"!==this.getAttribute("enhanced")},set:function(e){e?this.setAttribute("enhanced",""):this.removeAttribute("enhanced")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lowResSrc",{get:function(){return this.getAttribute("low-res-src")},set:function(e){this.setAttribute("low-res-src",e)},enumerable:!0,configurable:!0}),t.prototype.connectedCallback=function(){this.init()},t.prototype.attributeChangedCallback=function(e,t,i){"low-res-src"!==e||i===t||this.enhanced||(this.imgTag.src=i),"alt"===e&&i!==t&&(this.imgTag.alt=i||"")},t.prototype.registerIntersectionObserver=function(){var e=this,t={root:null,rootMargin:window.innerHeight+"px",threshold:1};this.observer=new IntersectionObserver(function(t){return e.handleElementIntersection(t[0])},t),this.observer.observe(this)},t.prototype.handleElementIntersection=function(e){if(this.src===this.lowResSrc)return this.enhanceImage(),void this.observer.unobserve(this);e.isIntersecting&&(this.enhanceImage(),this.observer.unobserve(this))},t.prototype.enhanceImage=function(){this.imgTag.src=this.src,this.enhanced=!0},t.prototype.removePlaceholder=function(){this.classList.contains("progressive-placeholder")&&this.classList.remove("progressive-placeholder")},t.prototype.init=function(){if(this.imgTag.alt=this.alt||"",this.appendChild(this.imgTag),!this.classList.contains("progressive-placeholder"))return window.IntersectionObserver?void this.registerIntersectionObserver():void(this.src&&this.enhanceImage())},t}(HTMLElement);customElements.define("progressive-image",p),i(420),i(422),i(425),i(441),i(442)},95:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"},n=function(){function e(){}return e.parseDAMLink=function(t,i,r,n){if(void 0===n&&(n={}),!t)return t;if(t=e.normalizeImageDomain(t),t.includes("specials-images.forbesimg.com")||t.includes("192.168.16.155:8080")||t.includes(".forbes.com/dam/imageserve/")){var o=void 0;(o=t.match(/\d+x\d+\.(jpg|jpeg|png|gif|tiff|bmp)/i))?t=t.replace(/\d+x\d+\.(jpg|jpeg|png|gif|tiff|bmp)/i,(i||0)+"x"+(r||0)+"."+(n&&n.filetype?n.filetype:o[1])):t+=(i||0)+"x"+(r||0)+"."+(n.filetype?n.filetype:"jpg"),(o=t.match(/fit=([^\&$]+)/i))?n&&n.fit&&(t=t.replace(/fit=([^\&$]+)/i,"fit="+n.fit)):t+=(t.includes("?")?"&":"?")+"fit="+(n.fit?n.fit:"scale"),n&&n.background&&((o=t.match(/background=([^\&$]+)/i))?t=t.replace(/background=([^\&$]+)/i,"background="+n.background):t+="&background="+n.background)}else t.match(/^(http(s)?:)?\/\/blogs-images\.forbes\.com/)&&!t.includes(".gif")&&(t=t.replace(/\.png/i,".jpg"),t.match(/width\=\d+/i)?t.replace(/width\=\d+/i,"width="+(i||0)):t+=(t.includes("?")?"&":"?")+"width="+(i||0),t.match(/height\=\d+/i)?t.replace(/height\=\d+/i,"height="+(r||0)):t+=(t.includes("?")?"&":"?")+"height="+(r||0),t.match(/fit=([^\&$]+)/i)?n&&n.fit&&(t=t.replace(/fit=([^\&$]+)/i,"fit="+n.fit)):t+=(t.includes("?")?"&":"?")+"fit="+(n.fit?n.fit:"scale"));return t=(t||"").replace(/^https?:/,"")},e.isValidEmail=function(e){return/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)},e.httpsUrl=function(e){return(e||"").replace(/^http:/,"https:")},e.normalizeImageDomain=function(t){return t=t||"",t.startsWith("//")?"https:"+t:t.startsWith("/")?"https://blogs-images.forbes.com"+t:e.httpsUrl(t)},e.prependThumbor=function(e,t,i){if(void 0===e&&(e=""),(e||"").indexOf("thumbor")>-1||(e||"").indexOf("gravatar")>-1)return e;var r=this.normalizeImageDomain(e);if(!this.isOnThumborWhitelist(r))return this.normalizeImageDomain(r);var n=encodeURIComponent(r);return"https://thumbor.forbes.com/thumbor/"+t+"x"+(i||0)+"/"+n},e.isOnThumborWhitelist=function(e){for(var t=!1,i=0;i<this.thumborWhitelist.length;i++)if(e.indexOf(this.thumborWhitelist[i])>-1){t=!0;break}return t},e.capitalizeFirstLetter=function(e){return(e||"").charAt(0).toUpperCase()+(e||"").slice(1)},e.unescapeTransferState=function(e){return e.replace(/&[^;]+;/g,function(e){return r[e]})},e.thumborWhitelist=["specials-images.forbes.com","specials-images.forbesimg.com","i.forbesimg.com","b-i.forbesimg.com","images.forbes.com","blogs-images.forbes.com"],e}()}},[397]);
//# sourceMappingURL=d21dff03371f6b0bcb0f.fbs.map